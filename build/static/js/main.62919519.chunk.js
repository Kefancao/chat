(this.webpackJsonpchitchat=this.webpackJsonpchitchat||[]).push([[0],{25:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),c=a(19),s=a.n(c),i=a(8),u=a(10),o=a.n(u),d=a(12),l=(a(25),a(4)),p=(a(14),a(15),a(13)),h=a(3);function j(e){var t=(l.a.auth().currentUser?l.a.auth().currentUser.displayName:"Anonymous")===e.username?"sent":"received";return Object(h.jsxs)("div",{className:"message"+t,children:[Object(h.jsx)("p",{className:"username",children:e.username}),Object(h.jsx)("p",{className:"message",children:e.text})]})}function b(e){var t=l.a.firestore().collection(e.chatNum).orderBy("timeSent","desc").limit(30),a=Object(p.a)(t,{idField:"id"}),n=Object(i.a)(a,1)[0];return n&&n.reverse(),Object(h.jsx)("div",{className:"messageBox",children:n&&n.map((function(e){return Object(h.jsx)(j,{text:e.text,username:e.username,spent:e.timeSent},e.id)}))})}l.a.apps.length?l.a.app():l.a.initializeApp({apiKey:"AIzaSyA4fbIfuvkx1DMtZK-Q0jGuzBZruVzVhRM",authDomain:"quick-chat-db609.firebaseapp.com",projectId:"quick-chat-db609",storageBucket:"quick-chat-db609.appspot.com",messagingSenderId:"557271218039",appId:"1:557271218039:web:38f82323173721e9111372",measurementId:"G-B66PQED7GZ"});function m(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],c=a[1],s=l.a.firestore().collection(e.chatNum),u=Object(n.useRef)(),p=function(){var e=Object(d.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r){e.next=3;break}return e.abrupt("return");case 3:return a=l.a.auth().currentUser?l.a.auth().currentUser.displayName:"Anonymous",e.next=6,s.add({text:r,timeSent:l.a.firestore.FieldValue.serverTimestamp(),username:a});case 6:c(""),u.current.scrollIntoView({behavior:"smooth"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"chatroom",children:[Object(h.jsxs)("div",{className:"scroll",children:[Object(h.jsx)(b,{chatNum:e.chatNum}),Object(h.jsx)("span",{ref:u})]}),Object(h.jsx)("div",{className:"sender",children:Object(h.jsxs)("form",{children:[Object(h.jsx)("input",{id:"messageReader",value:r,type:"text",placeholder:"Type here...",onChange:function(e){return function(e){c(e.target.value)}(e)}}),Object(h.jsx)("button",{type:"submit",onClick:function(e){return p(e)},children:"Send"})]})})]})}l.a.apps.length?l.a.app():l.a.initializeApp({apiKey:"AIzaSyA4fbIfuvkx1DMtZK-Q0jGuzBZruVzVhRM",authDomain:"quick-chat-db609.firebaseapp.com",projectId:"quick-chat-db609",storageBucket:"quick-chat-db609.appspot.com",messagingSenderId:"557271218039",appId:"1:557271218039:web:38f82323173721e9111372",measurementId:"G-B66PQED7GZ"});function f(e){for(var t="",a="abcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}function O(e){var t=l.a.firestore().collection("Rooms"),a=t.orderBy("roomID"),n=Object(p.a)(a),r=Object(i.a)(n,1)[0];return e.join?null:Object(h.jsx)("button",{className:"auth",onClick:function(){for(var a=f(5),n=0;n<r.length;++n)r[n]!==a||(a=f(5));t.add({roomID:a}),alert("Your new room Id is "+a),e.setJoin(!0),e.setCode(a)},children:"Create Room"})}function x(e){var t=function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.auth().signOut();case 2:e.rerender((function(e){return!e}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return l.a.auth().currentUser&&Object(h.jsx)("button",{className:"auth",onClick:t,children:"Sign Out"})}function v(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),u=Object(i.a)(s,2)[1],j=l.a.firestore().collection("Rooms").orderBy("roomID"),b=Object(p.a)(j,{idField:"id"}),m=Object(i.a)(b,1)[0],f=Object(n.useState)(!1),v=Object(i.a)(f,2),g=v[0],I=v[1],k=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.a.auth.GoogleAuthProvider,e.next=3,l.a.auth().signInWithPopup(t);case 3:u((function(e){return!e}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"signIn",children:[g?Object(h.jsxs)("form",{children:[Object(h.jsx)("label",{children:"Join Code: "}),Object(h.jsx)("input",{value:r,type:"text",name:"code",placeholder:"Type your code here...",onChange:function(e){return function(e){c(e.target.value)}(e)}}),Object(h.jsx)("button",{onClick:function(){for(var t=r.toLowerCase(),a=0;a<m.length;++a)if(m[a].roomID===t)return void e.setKey(t);alert("Invalid Room Id"),c("")},children:"Join"})]}):Object(h.jsxs)("button",{className:"auth",onClick:function(){return I(!0)},children:["Join as ",l.a.auth().currentUser?l.a.auth().currentUser.displayName:"Anonymous"]}),l.a.auth().currentUser?null:Object(h.jsx)("div",{className:"auth",children:Object(h.jsx)("button",{onClick:k,children:"Sign In with Google"})}),l.a.auth().currentUser?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{setJoin:I,join:g,setCode:c}),Object(h.jsx)(x,{rerender:u})]}):null]})}l.a.apps.length?l.a.app():l.a.initializeApp({apiKey:"AIzaSyA4fbIfuvkx1DMtZK-Q0jGuzBZruVzVhRM",authDomain:"quick-chat-db609.firebaseapp.com",projectId:"quick-chat-db609",storageBucket:"quick-chat-db609.appspot.com",messagingSenderId:"557271218039",appId:"1:557271218039:web:38f82323173721e9111372",measurementId:"G-B66PQED7GZ"});l.a.apps.length?l.a.app():l.a.initializeApp({apiKey:"AIzaSyA4fbIfuvkx1DMtZK-Q0jGuzBZruVzVhRM",authDomain:"quick-chat-db609.firebaseapp.com",projectId:"quick-chat-db609",storageBucket:"quick-chat-db609.appspot.com",messagingSenderId:"557271218039",appId:"1:557271218039:web:38f82323173721e9111372",measurementId:"G-B66PQED7GZ"});var g=function(){var e=Object(n.useState)("none"),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),u=s[0],o=s[1];return Object(n.useEffect)((function(){"none"===a||"noneX"===a?("noneX"===a&&alert("Invalid Room id :("),o(!1)):o(!0)}),[a]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"outer",children:[u?null:Object(h.jsx)("h1",{id:"outerAppName",children:"Quick Chat"}),u?Object(h.jsx)(m,{chatNum:a}):Object(h.jsx)(v,{setKey:r})]})})};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.62919519.chunk.js.map